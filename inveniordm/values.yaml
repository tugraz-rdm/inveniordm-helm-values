host: inveniordm.cyverse.at

invenio:
  hostname: inveniordm.cyverse.at
  init: true
  demo_data: false
  # Custom image configuration for testing
  image:
    repository: ghcr.io/sharedrdm/instance
    tag: official-v13-mug
    pullPolicy: Always
  default_users:
    "admin@inveniordm.cyverse.at": "admin123"
    "user01@inveniordm.cyverse.at": "user01pass"
    "user02@inveniordm.cyverse.at": "user02pass"
  extraConfig:
    SECURITY_REGISTERABLE: "false"

postgresql:
  enabled: true
  auth:
    username: "invenio"
    password: "invenio123"
    postgresPassword: "postgres123"
    database: "invenio"

redis:
  enabled: true
  replica:
    replicaCount: 1

rabbitmq:
  enabled: true
  auth:
    username: "invenio"
    password: "rabbitmq123"
  extraConfiguration: |
    default_user_tags.administrator = true
    default_user_tags.management = true
  livenessProbe:
    enabled: true
    initialDelaySeconds: 120
    periodSeconds: 30
    timeoutSeconds: 20
    successThreshold: 1
    failureThreshold: 6
    exec:
      command:
        - sh
        - -ec
        - curl -f --user invenio:$RABBITMQ_PASSWORD 127.0.0.1:15672/api/health/checks/virtual-hosts
  readinessProbe:
    enabled: true
    initialDelaySeconds: 10
    periodSeconds: 30
    timeoutSeconds: 20
    successThreshold: 1
    failureThreshold: 3
    exec:
      command:
        - sh
        - -ec
        - curl -f --user invenio:$RABBITMQ_PASSWORD 127.0.0.1:15672/api/health/checks/local-alarms

opensearch:
  enabled: true
  master:
    replicas: 1
    resources:
      requests:
        memory: 512Mi
        cpu: 20m
      limits:
        memory: 2Gi
        cpu: 1
  data:
    replicas: 1
    resources:
      requests:
        memory: 512Mi
        cpu: 20m
      limits:
        memory: 2Gi
        cpu: 1
  coordinating:
    replicas: 1
    resources:
      requests:
        memory: 512Mi
        cpu: 20m
      limits:
        memory: 2Gi
        cpu: 1
  ingest:
    replicas: 1
    resources:
      requests:
        memory: 512Mi
        cpu: 20m
      limits:
        memory: 2Gi
        cpu: 1

persistence:
  enabled: true
  access_mode: ReadWriteMany
  storage_class: "nfs-client"
  size: 10G

web:
  replicas: 1
  startupProbe:
    timeoutSeconds: 30
    failureThreshold: 10

worker:
  replicas: 1

flower:
  enabled: false
